{"version":3,"file":"up-litemol-webcomponent.js","sources":["../src/main.js"],"sourcesContent":["const loadComponent = function () {\n    class UpLitemolWebcomponent extends HTMLElement {\n\n        constructor() {\n            super();\n            // We can't use the shadow DOM as the LiteMol component interacts with the\n            // document DOM.\n            this.loadMolecule = this\n                .loadMolecule\n                .bind(this);\n        }\n\n        getId() {\n            return this.getAttribute('id');\n        }\n\n        setId(id) {\n            return this.setAttribute('id', id);\n        }\n\n        connectedCallback() {\n            const jsmolDiv = document.createElement('div');\n            jsmolDiv.id = 'app';\n            this.appendChild(jsmolDiv);\n\n            const Plugin = LiteMol.Plugin;\n            this._liteMol = Plugin.create({\n                target: '#app',\n                viewportBackground: '#fff',\n                layoutState: {\n                    hideControls: true,\n                    isExpanded: true\n                },\n                allowAnalytics: false\n            });\n            this.loadMolecule(this.id);\n        }\n\n        attributeChangedCallback(attrName, oldVal, newVal) {}\n\n        loadMolecule(_id) {\n            this\n                ._liteMol\n                .loadMolecule({\n                    _id, format: 'cif', // or pdb, sdf, binarycif/bcif\n                    url: `https://www.ebi.ac.uk/pdbe/static/entry/${_id.toLowerCase()}_updated.cif`,\n                    // instead of url, it is possible to use data: \"string\" or ArrayBuffer (for\n                    // BinaryCIF) loaded molecule and model can be accessed after load using\n                    // plugin.context.select(modelRef/moleculeRef)[0], for example\n                    // plugin.context.select('1tqn-molecule')[0]\n                    moleculeRef: _id + '-molecule',\n                    modelRef: _id + '-model',\n                    // Use this if you want to create your own visual. doNotCreateVisual: true\n                })\n                .then(() => {\n                    // Use this (or a modification of this) for custom visualization: const style =\n                    // LiteMol.Bootstrap.Visualization.Molecule.Default.ForType.get('BallsAndSticks'\n                    // ); const t = plugin.createTransform(); t.add(id + '-model',\n                    // LiteMol.Bootstrap.Entity.Transformer.Molecule.CreateVisual, { style: style })\n                    // plugin.applyTransform(t);\n                    console.log('Molecule loaded');\n                })\n                .catch(e => {\n                    console.error(e);\n                });\n        }\n\n    }\n    customElements.define('up-litemol-webcomponent', UpLitemolWebcomponent);\n}\n\n// Conditional loading of polyfill\nif (window.customElements) {\n    loadComponent();\n} else {\n    document\n        .addEventListener('WebComponentsReady', function () {\n            loadComponent();\n        });\n}"],"names":["loadComponent","UpLitemolWebcomponent","loadMolecule","bind","getAttribute","id","setAttribute","jsmolDiv","document","createElement","appendChild","Plugin","LiteMol","_liteMol","create","attrName","oldVal","newVal","_id","format","toLowerCase","then","log","catch","error","e","HTMLElement","define","window","customElements","addEventListener"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,gBAAgB,SAAhBA,aAAgB,GAAY;QACxBC,qBADwB;;;yCAGZ;;;;;;;kBAILC,YAAL,GAAoB,MACfA,YADe,CAEfC,IAFe,OAApB;;;;;;oCAKI;uBACG,KAAKC,YAAL,CAAkB,IAAlB,CAAP;;;;kCAGEC,EAhBoB,EAgBhB;uBACC,KAAKC,YAAL,CAAkB,IAAlB,EAAwBD,EAAxB,CAAP;;;;gDAGgB;oBACVE,WAAWC,SAASC,aAAT,CAAuB,KAAvB,CAAjB;yBACSJ,EAAT,GAAc,KAAd;qBACKK,WAAL,CAAiBH,QAAjB;;oBAEMI,SAASC,QAAQD,MAAvB;qBACKE,QAAL,GAAgBF,OAAOG,MAAP,CAAc;4BAClB,MADkB;wCAEN,MAFM;iCAGb;sCACK,IADL;oCAEG;qBALU;oCAOV;iBAPJ,CAAhB;qBASKZ,YAAL,CAAkB,KAAKG,EAAvB;;;;qDAGqBU,QAtCC,EAsCSC,MAtCT,EAsCiBC,MAtCjB,EAsCyB;;;yCAEtCC,GAxCa,EAwCR;qBAETL,QADL,CAEKX,YAFL,CAEkB;4BAAA,EACLiB,QAAQ,KADH;sEAEsCD,IAAIE,WAAJ,EAAhD,iBAFU;;;;;iCAOGF,MAAM,WAPT;8BAQAA,MAAM;;iBAVxB,EAaKG,IAbL,CAaU,YAAM;;;;;;4BAMAC,GAAR,CAAY,iBAAZ;iBAnBR,EAqBKC,KArBL,CAqBW,aAAK;4BACAC,KAAR,CAAcC,CAAd;iBAtBR;;;;MAxC4BC,WADN;;mBAoEfC,MAAf,CAAsB,yBAAtB,EAAiD1B,qBAAjD;CApEJ;;;AAwEA,IAAI2B,OAAOC,cAAX,EAA2B;;CAA3B,MAEO;aAEEC,gBADL,CACsB,oBADtB,EAC4C,YAAY;;KADxD;;;;;"}